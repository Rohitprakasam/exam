#include <stdio.h>
#include <stdlib.h>

typedef struct node {
    int vertex;
    struct node *next;
} node;

node *G[20];       // Heads of adjacency lists
int visited[20];   // Visited array
int n;             // Number of vertices

void read_graph();
void insert(int vi, int vj);
void DFS(int i);

int main() {
    int i;
    read_graph();

    // Initialize visited array to 0
    for (i = 0; i < n; i++) {
        visited[i] = 0;
    }

    printf("\nDFS Traversal starting from vertex 0: ");
    DFS(0); 

    return 0;
}

void DFS(int i) {
    node *p;
    printf("%d ", i);
    visited[i] = 1; // Mark node as visited

    for (p = G[i]; p != NULL; p = p->next) {
        if (!visited[p->vertex]) {
            DFS(p->vertex);
        }
    }
}

void read_graph() {
    int i, vi, vj, no_of_edges;
    printf("Enter number of vertices: ");
    scanf("%d", &n);

    // Initialize G[] with NULL
    for (i = 0; i < n; i++) {
        G[i] = NULL;
    }

    printf("Enter number of edges: ");
    scanf("%d", &no_of_edges);

    for (i = 0; i < no_of_edges; i++) {
        printf("Enter an edge (u v): ");
        scanf("%d %d", &vi, &vj);
        insert(vi, vj);
        insert(vj, vi); // For Undirected Graph
    }
}

void insert(int vi, int vj) {
    node *p, *q;
    
    // Create new node
    q = (node *)malloc(sizeof(node));
    q->vertex = vj;
    q->next = NULL;

    // Insert the node in the linked list of vertex vi
    if (G[vi] == NULL) {
        G[vi] = q;
    } else {
        p = G[vi];
        while (p->next != NULL) {
            p = p->next;
        }
        p->next = q;
    }
}
